<nz-card style="width: 100%; background-color: #f5f5f5;">

    <div class="header d-block bg-white shadow mb-1" style="height: 64px;"></div>
    <div cdkDropListGroup class="drop-list-group">
      <div class="menu-list shadow" 
        cdkDropList
        #menuList="cdkDropList"
        id="menuid"
        [cdkDropListData]="menuData"
        (cdkDragMoved)="menuMoved($event)"
        (cdkDropListDropped)="menuDrop($event)">

        <nz-input-group class="mb-2" [nzSuffix]="suffixIconSearch">
          <input type="text" nz-input placeholder="搜索组件" />
        </nz-input-group>
        <ng-template #suffixIconSearch>
          <i nz-icon type="search"></i>
        </ng-template>

        <hr class="m-2">
        <div class="example-box-1" *ngFor="let item of menuData" cdkDrag>{{item.key ? item.key : item?.templateOptions?.label}}</div>
      </div>
      
      <div  class="drag-list shadow"
            id="dragroot"
            cdkDropList
            [cdkDropListData]="fields" 
            [cdkDropListConnectedTo]="ids"  

            (cdkDropListDropped)="dragListDrop($event)"
            (cdkDropListEntered)="dragListEntered($event)"
            (cdkDropListExited)="dragListExited($event)"

            [cdkDropListEnterPredicate]="canDropPredicate()">

            <formly-field 
              cdkDrag
              *ngFor="let field of fields"

              (click)="fieldClick($event, field);" 
              (contextmenu)="fieldContextMenu($event, field);" 
              (cdkDragDropped)="fieldDrop($event)"
              (cdkDragEnded)="fieldEntered($event)"
              (cdkDragExited)="fieldExited($event)"
              (cdkDragReleased)="fieldReleased($event)"
              (cdkDragStarted)="fieldStarted($event)"
              hide-deprecation
              [form]="field.form"
              [options]="field.options"
              [model]="field.model"
              [field]="field">
            </formly-field>      
      </div>

      <div class="drag-operator shadow">
        <i nz-icon nzType="copy" nzTheme="outline"></i>
        <formly-form [model]="operatorModel" [fields]="operatorFields" [options]="operatorOptions" [form]="operatorForm" (modelChange)="change($event)" ></formly-form>
      </div>
    </div>
</nz-card>


<button nz-button [nzType]="'primary'" (click)="showModal()"><span>Show Modal</span></button>
<nz-modal [(nzVisible)]="isModelVisible" nzTitle="显示modal" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
<pre>{{resultField | json}}</pre>
</nz-modal>

<ng-template #contentmenu>
  <div class="contentmenu-dialog-content">
    <ul>
      <li>剪切<i>Ctrl + X</i></li>
      <li>复制<i>Ctrl + C</i></li>
      <li>黏贴<i>Ctrl + V</i></li>
      <hr>
      <li>删除<i>Delete/Backspace</i></li>
      <li>向上<i>Ctrl + Up</i></li>
      <li>向下<i>Ctrl + Down</i></li>
    </ul>
  </div>
</ng-template>
